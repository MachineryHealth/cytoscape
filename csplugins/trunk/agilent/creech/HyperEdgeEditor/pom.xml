<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>


  <groupId>cytoscape.hyperedge</groupId>
  <artifactId>HyperEdgeEditor</artifactId>
<!-- We'd like to just pass in a 'version' parameter, but passing in something like '-Dversion=2.63' throws 
     a NPE in maven, so we instead use 'my-version': -->
<!--  <version>2.6x-SNAPSHOT</version> -->
  <version>${my-version}</version>
  <packaging>jar</packaging>

  <name>HyperEdgeEditor</name>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <!-- The default is to build the SNAPSHOT if no repo-type param is present: -->
     <repo-type>snapshot</repo-type>
     <repo-name>Ramblas Snaphots</repo-name>
     <repo-url>http://ramblas.scs.agilent.com:8081/nexus/content/repositories/snapshots</repo-url>
     <repo-unique>false</repo-unique>
  </properties>

  <profiles>
    <profile>
      <id>release</id>
      <activation>
        <property>
          <name>repo-type</name>
          <value>release</value>
        </property>
      </activation>
      <properties>
	<repo-name>Ramblas Releases</repo-name>
	<repo-url>http://ramblas.scs.agilent.com:8081/nexus/content/repositories/releases</repo-url>
	<repo-unique>true</repo-unique>
      </properties>
    </profile>
  </profiles>

  <build>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
	<version>2.3.2</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
      <plugin>
        <artifactId>maven-surefire-plugin</artifactId>
	<version>2.8.1</version>
      </plugin>
    <plugin>
      <!-- running maven javadoc:javadoc will produce javadocs in target/apidocs -->
        <artifactId>maven-javadoc-plugin</artifactId>
        <version>2.7</version>
	<!-- bind to the install phase: -->
	<executions>
	   <execution>
	      <phase>install</phase>
	      <goals>
  	        <goal>javadoc</goal>
	      </goals>
	   </execution>
	</executions>
        <configuration>
          <encoding>UTF-8</encoding>
          <locale>en</locale>
          <javadocVersion>1.6</javadocVersion>
	  <reportOutputDirectory>${project.build.directory}</reportOutputDirectory>
          <destDir>apidocs</destDir>
          <links>
            <link>http://download.oracle.com/javase/1.6.0/docs/api/</link>
          </links>
          <footer>HyperEdgeEditor ${project.version} API</footer>
          <header>HyperEdgeEditor ${project.version} API</header>
        </configuration>
      </plugin>
      <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.2.1</version>
        <executions>
	  <!-- Associate this assembly with the package lifecycle stage (e.g., 'mvn package'): -->
          <execution>
            <id>my-assembly</id>
            <phase>package</phase>
           <goals>
             <goal>single</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
	  <!-- use predefined descriptor: -->
          <descriptorRefs>
             <descriptorRef>jar-with-dependencies</descriptorRef>
          </descriptorRefs>
	  <!-- Also assemble a jar using our custom descriptor to gather just classes: -->
          <descriptors>
	      <descriptor>src/main/assembly/just-classes.xml</descriptor>
	    </descriptors>
	  <!-- Manifest additions: -->
          <archive>
            <manifestEntries>
              <Cytoscape-Plugin>cytoscape.hyperedge.editor.HyperEdgeEditorPlugin</Cytoscape-Plugin>
            </manifestEntries>
	  </archive>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <repositories>
      <repository>
          <id>cytoscape_snapshots</id>
          <snapshots>
            <enabled>true</enabled>
          </snapshots>
          <releases>
            <enabled>false</enabled>
          </releases>
          <name>Cytoscape Snapshots</name>
          <url>http://cytoscape.wodaklab.org/nexus/content/repositories/snapshots/</url>
       </repository>
       <repository>
          <id>cytoscape_releases</id>
          <snapshots>
            <enabled>false</enabled>
          </snapshots>
          <releases>
            <enabled>true</enabled>
          </releases>
          <name>Cytoscape Releases</name>
          <url>http://cytoscape.wodaklab.org/nexus/content/repositories/releases/</url>
       </repository>
    <repository>
      <id>ramblas_releases</id>
      <name>Ramblas Releases</name>
      <url>http://ramblas.scs.agilent.com:8081/nexus/content/repositories/releases</url>
      <snapshots>
         <enabled>false</enabled>
      </snapshots>
      <releases>
        <enabled>true</enabled>
      </releases>
    </repository>
    <repository>
      <id>ramblas_snapshots</id>
      <name>Ramblas Snapshots</name>
      <url>http://ramblas.scs.agilent.com:8081/nexus/content/repositories/snapshots</url>
      <snapshots>
         <enabled>true</enabled>
      </snapshots>
      <releases>
        <enabled>false</enabled>
      </releases>
    </repository>
  </repositories>

  <dependencies>
    <dependency>
      <groupId>cytoscape</groupId>
      <artifactId>cytoscape</artifactId>
      <version>2.8.1</version>
      <!-- At runtime, we don't need to include Cytoscape since it is already there: -->
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>cytoscape.coreplugins</groupId>
      <artifactId>editor</artifactId>
      <version>2.8.1</version>
      <classifier>jar-with-dependencies</classifier>
      <!-- At runtime, we don't need to include the Editor plugin since it is already there: -->
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>com.agilent.labs.lsiutils</groupId>
      <artifactId>LSIUtils</artifactId>
      <version>0.1x-SNAPSHOT</version>
    </dependency>
    <!-- This is a dependency from LSIUtils, but we include here to stop including
         all the skinlf code in the plugin jar created, which we don't use -->
    <dependency>
      <groupId>com.l2prod.gui.plaf.skin</groupId>
      <artifactId>skinlf</artifactId>
      <version>5.8.2006</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>cytoscape.hyperedge</groupId>
      <artifactId>HyperEdge</artifactId>
      <version>2.6x-SNAPSHOT</version>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.8.2</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
  <distributionManagement>
    <repository>
      <id>ramblas_deployment</id>
      <name>${repo-name}</name>
      <url>${repo-url}</url>
      <!-- keep replacing the snapshot-don't save unique versions of each snapshot released -->
      <uniqueVersion>${repo-unique}</uniqueVersion>
    </repository>
  </distributionManagement>
</project>