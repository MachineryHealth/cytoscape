<?xml version = "1.0"?>
<project name="ShortestPathPlugin2" default="all" basedir=".">

	<property name="src" location="src" />
	<property name="build" location="build" />
	<property name="build.compiler" value="modern" />
	<!-- path to Cytoscape under development (CVS) -->
	<property name="cylib" location="../cytoscape" />
	<property name="jar" location="jar" />
	<property name="doc" location="doc" />
	<property name="projectName" value="ShortestPathPlugin2" />

	<property name="cytoscape.plugin" value="${lib}/plugins" />

	<path id="classpath">
		<fileset dir="${cylib}">
			<include name="**/*.jar" />
		</fileset>
	</path>

	<target name="prepare" depends="clean">
		<mkdir dir="${build}" />
	</target>

	<target name="compile" depends="prepare" description="Compile with Cytoscape under development">
		<!-- Compile the java code from ${src} into ${build} -->
		<javac source="1.5" debug="true" deprecation="true" srcdir="${src}" destdir="${build}">
			<classpath refid="classpath" />
		</javac>
	</target>

	<target name="clean" description="clean up">
		<!-- Delete the ${build} and ${src} directory trees -->
		<delete dir="${build}" />
		<delete dir="${jar}" />
	</target>

	<target name="jar" depends="compile" description="makes a jar for Cytoscape under development">
		
		<copy todir="build/org/cytoscape/analysis/shortestpath" file="resources/plugin.props" />
		
		<jar jarfile="build/${projectName}.jar">
			<fileset dir="${build}" />
			<manifest>
				<attribute name="Cytoscape-Plugin" value="org.cytoscape.analysis.shortestpath.ShortestPathPlugin" />
			</manifest>			
		</jar>
	</target>

	<target name="all" depends="jar" />

	<target name="run" depends="jar" description="Run under development">
		<java classname="cytoscape.CyMain" classpathref="classpath" fork="true" maxmemory="1g">
			<arg line="--JLD" />
			<arg line="${jar}/${projectName}.jar" />
			<arg line="-vt" />
			<arg line="5000" />
		</java>
	</target>


	<!-- Target to Run JavaDoc -->
	<target name="doc" description="Runs JavaDoc.">
		<javadoc packagenames="org.cytoscape.analysis.shortestpath.*" sourcepath="src" source="1.5" destdir="doc" classpathref="classpath_release">
			<link href="http://java.sun.com/j2se/1.5.0/docs/api/" />
			<link href="http://csbi.sourceforge.net/API/" />
			<link href="http://chianti.ucsd.edu/Cyto-2_4_1/javadoc/" />
		</javadoc>
	</target>

</project>
