<!-- RDFScape ant build file modified by Kei-->

<project name="RDFScape" default="jar" basedir=".">

	<description>Simple build file for my plugin</description>

	<!-- You need modify this to your Cytoscape -->
	<property name="cytoscape.dir" value="../cytoscape" />
	
	<property name="plugin.jar" value="RDFScape.jar" />

	<property name="src" location="${basedir}/src" />
	<property name="bin" location="${basedir}/bin" />

	<property name="plugin" location="${basedir}/plugin/" />
	<property name="dist" location="${basedir}/dist/" />
	<property name="extlibdir" location="${basedir}/extlibdir/" />

	<!-- edit this for your environment -->
	<property name="deploy" location="${cytoscape.dir}/plugins/core/" />
	<property name="deployApple" location="${cytoscape.dir}/plugins/core/" />

	<!-- Library locations -->
	<property name="jena.dir" location="${basedir}/lib/jena-2.6.2" />
	<property name="pellet.dir" location="${basedir}/lib/pellet-2.0.1" />



	<!-- ==================== Compilation Classpath ====================== -->
	<path id="compile.classpath">
		<fileset dir="${cytoscape.dir}">
			<include name="cytoscape.jar" />
		</fileset>
		<fileset dir="${cytoscape.dir}/lib">
			<include name="*.jar" />
		</fileset>
		<fileset dir="${basedir}/lib">
			<include name="*/**" />
		</fileset>
	</path>

	<!-- ==================== Clean Target =============================== -->
	<target name="clean" description="Deletes all build files and starts fresh">
		<delete dir="${bin}" />
		<delete file="${basedir}/plugin/${plugin.jar}" />
	</target>


	<target name="init">
		<delete dir="${bin}" />
		<mkdir dir="${bin}" />
	</target>

	<!-- Compile RDF Scape -->
	<target name="compile" depends="init">
		<javac source="1.5" target="1.5" srcdir="${src}" destdir="${bin}">
			<classpath refid="compile.classpath" />
		</javac>

		<copy todir="${bin}/images">
			<fileset dir="${src}/images" />
		</copy>
		<copy todir="${bin}/extras">
			<fileset dir="${src}/extras" />
		</copy>
	</target>

	<target name="jar" depends="compile">
		<unjar dest="${bin}">

			<fileset dir="${basedir}/lib">
				<include name="*/**" />
			</fileset>
		</unjar>

		<jar jarfile="${plugin}/RDFScape.jar" basedir="${bin}" />
	</target>

	<target name="deploy" depends="jar">
		<copy file="${plugin}/RDFScape.jar" todir="${deploy}" />
	</target>
	<target name="deployApple" depends="jar">
		<copy file="${plugin}/RDFScape.jar" todir="${deployApple}" />
	</target>
	<target name="makeDistribution" depends="jar">
		<mkdir dir="${dist}/plugins" />
		<mkdir dir="${dist}/extlibs" />
		<mkdir dir="${dist}/rdfscapecontexts" />

		<copy file="${plugin}/RDFScape.jar" todir="${dist}/plugins" />
		<copy todir="${dist}/rdfscapecontexts">
			<fileset dir="${basedir}/extras/rdfscapecontexts/" />
		</copy>
		<copy todir="${dist}/extlibs">
			<fileset dir="${extlibdir}" />
		</copy>
		<copy file="${basedir}/extras/cytordfscape.sh" todir="${dist}" />
		<copy file="${basedir}/extras/cytordfscape.bat" todir="${dist}" />
	</target>


</project>