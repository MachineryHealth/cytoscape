<?xml version="1.0" encoding="UTF-8"?>
<project name="Build cytoscape feature" default="feature-build">

	<!-- Location of coniguration files -->
	<property name="builder" location="." />
	<!-- Identifier for the feature being built-->
	<property name="base" location="c:/eclipse35" />
	<!-- parent of base location-->
	<property name="baseLocation" location="${base}/eclipse" />
	<property name="buildDirectory" location="${builder}/build" />


	<pathconvert property="equinoxLauncher">
		<path>
			<fileset dir="${baseLocation}/plugins" includes="**/*.jar" />
		</path>
		<regexpmapper from="(org\.eclipse\.equinox\.launcher)(_)(.*)\.jar" to="\0" />
	</pathconvert>


	<pathconvert property="pdeBuild">
		<path>
			<fileset dir="${baseLocation}/plugins" includes="**/*productBuild.xml" />
		</path>
		<regexpmapper from="(org\.eclipse\.pde\.build)(_)(.*)" to="\0" />
	</pathconvert>

	<!--
		This target actually executes the PDE Build process by launching the 
		Eclipse antRunner application.
	-->
	<target name="feature-build">	

		<java classname="org.eclipse.equinox.launcher.Main" fork="true" failonerror="true" >
			<arg value="-application" />
			<arg value="org.eclipse.ant.core.antRunner" />
			<arg value="-buildfile" />
			<arg value="build_cy3_feature.xml" />
			<classpath>
				<pathelement location="${baseLocation}/plugins/${equinoxLauncher}" />
			</classpath>

		</java>	
	</target>

</project>