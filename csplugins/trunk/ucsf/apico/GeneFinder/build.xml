<?xml version = "1.0"?>
<project name = "FinderPlugin" default = "jar_release" basedir = ".">
   
	<property name="plugin.name" value="FinderPlugin"/>
   <property name = "src" location = "src"/>
   <property name = "build" location = "build"/>
  	<property name="build.classes" value="${build}/classes"/>
	<property name="pluginlib.dir" value="lib"/>
	<property name = "build.compiler" value = "modern"/>
   <!-- path to Cytoscape release version -->
   <property name = "lib.release" location = "/Applications/Cytoscape_v2.6.2"/>
   <property name = "jar"  location = "jar"/>
   <property name = "doc" location = "doc"/>


	<property name="cytoscape.plugin.release" value="${lib.release}/plugins"/>

   <path id = "classpath_release">
       <fileset dir = "${lib.release}">
          <include name = "**/*.jar"/>
       </fileset>
   </path>

   <target name="prepare" depends="clean">
		<mkdir dir="${build}"/>
		<mkdir dir="${build.classes}"/>

   </target>

   <target name="compile_release" depends = "prepare" description="Compiles with current official release of Cytoscape">
   <!-- Compile the java code from ${src} into ${build} -->
            <javac debug="Yes" srcdir="${src}" destdir="${build.classes}">
		<classpath refid="classpath"/>
	</javac>
   </target>
   
   <target name="clean" description="clean up" >
      <!-- Delete the ${build} and ${src} directory trees -->
      <delete dir="${build}"/>
      <delete dir="${jar}"/>
   </target>

   <target name="jar_release" depends="compile_release" description="makes a jar for the current Cytoscape release">
     <unjar dest="${build.classes}">
      <fileset dir="${pluginlib.dir}"/>
     </unjar>

   <jar destfile="${build}/${plugin.name}.jar">
     <fileset dir="${build.classes}"/>
  </jar>
		 
		<echo message="${plugin.name}.jar is now complete.  It is located in build/ directory"/>

		<copy file="${build}/${plugin.name}.jar" todir="../cytoscape2.6/plugins/core/"/>
		<copy file="${build}/${plugin.name}.jar" todir="/Applications/Cytoscape_v2.6.1/plugins"/>

   </target>


   <!-- Target to Run JavaDoc -->
    <target name="doc" description="Runs JavaDoc.">
        <javadoc packagenames="GeneFinder.*" sourcepath="src" source="1.4" destdir="doc">
        <link href = "http://java.sun.com/j2se/1.4.2/docs/api/"/>
        <link href = "http://csbi.sourceforge.net/API/"/>
       </javadoc>
    </target>

</project>
