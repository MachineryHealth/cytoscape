<?xml version = "1.0"?>
<project name="NetworkAnalyzer" default="jar" basedir=".">

	<property name="src" location="src" />
	<property name="build" location="build" />
	<property name="build.compiler" value="modern" />
	<!-- Path to Cytoscape under development -->
	<property name="lib" location="../../../../cytoscape" />
	<property name="jar"  location="jar" />
	<property name="doc" location="doc" />
	<property name="cytoscape.plugin" value="${lib}/plugins" />

	<path id="classpath">
		<fileset dir="${lib}">
			<include name="**/*.jar" />
		</fileset>
		<fileset dir="lib">
			<include name="*.jar" />
		</fileset>
	</path>

	<target name="prepare" depends="clean">
		<mkdir dir="${build}" />
	</target>

	<target name="compile" depends = "prepare" description="Compile with Cytoscape under development">
		<!-- Compile the java code from ${src} into ${build} -->
		<javac source = "1.5" debug="true" deprecation="true" srcdir = "${src}" destdir="${build}">
			<classpath refid = "classpath" />
		</javac>
	</target>

	<target name="clean" description="clean up">
		<!-- Delete the ${build} and ${jar} directory trees -->
		<delete dir="${build}" />
		<delete dir="${jar}" />
	</target>

	<target name="jar" depends="compile" description="makes a jar for Cytoscape under development">
	<mkdir dir = "${jar}" />
	<jar jarfile="${jar}/NetworkAnalyzer.jar">
		<manifest>
			<attribute name="Cytoscape-Plugin" value="de.mpg.mpi_inf.bioinf.netanalyzer.Plugin" />
		</manifest>
		<fileset dir="${build}" />
	</jar>
	</target>

	<target name="run" depends="jar" description="Run under development">
		<java classname="cytoscape.CyMain" classpathref="classpath" fork="true" maxmemory="1g">
			<arg line = "--JLD" />
			<arg line = "${jar}/NetworkAnalyzer.jar" />
			<arg line = "-vt" />
			<arg line = "5000" />
		</java>
	</target>

	<!-- Target to Run JavaDoc -->
	<target name="doc" description="Run JavaDoc">
		<javadoc packagenames="metaNodePlugin2.*" sourcepath="src" source="1.5" destdir="doc" classpathref="classpath_release">
	        <link href = "http://download.oracle.com/javase/1.5.0/docs/api/" />
	        <link href = "http://jfree.org/jfreechart/api/javadoc/" />
			<link href = "http://chianti.ucsd.edu/Cyto-2_7_0/javadoc/" />
		</javadoc>
	</target>
</project>