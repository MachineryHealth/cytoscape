<?xml version = "1.0"?>
<project name = "metaNodesPlugin" default = "compile" basedir = ".">
   
   <property name = "src" location = "src"/>
   <property name = "build" location = "build"/>
   <property name = "build.compiler" value = "modern"/>
   <property name = "jar"  location = "jar"/>
   <property name = "doc" location = "doc"/>
   <property name = "local.lib" location = "lib"/>
	
	<!-- CHANGE THIS TO YOUR CYTOSCAPE PATHS: -->
	<property name = "cytoscape22" value="../../../../cytoscape-v2.2/"/>
	<property name = "cytoscapeCVS" value ="../../../../cytoscape"/>
	<property name = "cytoscape22.plugins" value ="../../../../cytoscape-v2.2/plugins"/>
	<property name = "cytoscapeCVS.plugins" value ="../../../../cytoscape/plugins/core"/>
		
	<property name = "cytoscape" value = "${cytoscapeCVS}"/>
	<property name = "cytoscape.plugins" value = "${cytoscapeCVS.plugins}"/>

   <path id = "classpath">
   	<fileset dir = "${cytoscape}">
    		<include name = "**/*.jar"/>
    </fileset>
   	<fileset dir = "${local.lib}">
   		<include name = "**/*.jar"/>
   	</fileset>
   </path>

   <target name="prepare" depends="clean">
      <mkdir dir="${build}"/>
   </target>

   <target name="compile" depends = "prepare" description="Compile with Cytoscape under development">
   <!-- Compile the java code from ${src} into ${build} -->
   <javac source = "1.4" debug="true" deprecation="true" srcdir = "${src}" destdir="${build}">
      <classpath refid = "classpath"/>
   </javac>
   </target>

   <target name="clean" description="clean up" >
      <!-- Delete the ${build} and ${src} directory trees -->
      <delete dir="${build}"/>
      <delete dir="${jar}"/>
   </target>
	
	<target name="jar" depends="compile">
		<unjar overwrite="Yes" dest = "${build}">
			<fileset dir = "${local.lib}">
				<include name="**/*.jar"/>
			</fileset>
		</unjar>
		<mkdir dir= "${jar}"/>
		<jar destfile = "${jar}/metanodepl.jar">
		    	<fileset dir = "${build}"/>
		</jar>
		<copy file="${jar}/metanodepl.jar" todir="${cytoscape.plugins}"/>
		<echo message="metanodepl.jar is complete, it is located in ${jar} and in ${cytoscape.plugins}"/>
	</target>

   <!-- Target to Run JavaDoc -->
    <target name="doc" description="Runs JavaDoc.">
        <javadoc packagenames="metanodePlugin.*" sourcepath="src" source="1.4" destdir="doc">
        <link href = "http://java.sun.com/j2se/1.4.2/docs/api/"/>
        <link href = "http://csbi.sourceforge.net/API/"/>
       </javadoc>
    </target>

</project>
