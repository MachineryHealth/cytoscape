<?xml version = "1.0"?>
<project name = "metaNodeViewer" default = "compile" basedir = ".">
   
   <property name = "src" location = "src"/>
   <property name = "build" location = "build"/>
   <property name = "build.compiler" value = "modern"/>
   <property name = "lib" location = "../../../../cytoscape/lib"/>
   <property name = "jar"  location = "jar"/>

   <property name="cytoscape.plugin.dir" value="../../../../cytoscape/plugins"/>

   <path id = "classpath_compile">
      <pathelement path = "${build}"/>
      <pathelement path = "../../../../cytoscape/build/cytoscape.jar"/>
      <fileset dir = "${lib}">
          <include name = "**/*.jar"/>
       </fileset>
   </path>

   <path id = "classpath_run">
      <pathelement path = "${build}"/>
      <pathelement path = "../../../../cytoscape/build/cytoscape.jar"/>
      <fileset dir = "${lib}">
          <include name = "**/*.jar"/>
       </fileset>
   </path>

   <target name="prepare" depends="clean">
      <mkdir dir="${build}"/>
   </target>

   <target name="compile" depends = "prepare" description="Compile">
   <!-- Compile the java code from ${src} into ${build} -->
   <javac source = "1.4" srcdir = "${src}" destdir="${build}">
      <classpath refid = "classpath_compile"/>
   </javac>
   </target>
   
   <target name="clean" description="clean up" >
      <!-- Delete the ${build} and ${src} directory trees -->
      <delete dir="${build}"/>
      <delete dir="${jar}"/>
   </target>

   <target name="jar" depends="compile" description="makes a jar">
   <mkdir dir = "${jar}"/>
   <jar jarfile="${jar}/metanode.jar">
      <fileset dir="${build}"/>
   </jar>
    <copy todir="${cytoscape.plugin.dir}" file="jar/metanode.jar"/>
   </target>

   <target name = "run" depends="jar" description = "Run">
      <java classname = "cytoscape.cytoscape" classpathref = "classpath_run"
          fork = "true" maxmemory = "1g">
          <arg line = "-y giny"/>
          <arg line = "-i"/>
          <arg line = "../bmtest/src/csplugins/bmtest/input/network.sif"/>
          <arg line = "--JLD"/>
          <arg file = "${jar}/metanode.jar"/>
    </java>
    </target>
</project>