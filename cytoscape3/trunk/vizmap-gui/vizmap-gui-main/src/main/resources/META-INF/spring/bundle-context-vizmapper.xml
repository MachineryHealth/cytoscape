<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-2.5.xsd
           http://www.springframework.org/schema/util
           http://www.springframework.org/schema/util/spring-util-2.5.xsd">

	<description>
		Configuration file for VizMapper GUI.
	</description>

	<!--
		Setting (property) file for VizMapper GUI. This bean can be injected
		as a regular Java Property object.
	-->
	<util:properties id="vizmapUIResource"
		location="/META-INF/spring/config/vizmapui.properties" />

	<context:property-placeholder
		location="/META-INF/spring/config/vizmapui.properties" />
	<context:annotation-config />

	<!-- Visual property editors -->
	<bean name="editorFactory"
		class="org.cytoscape.vizmap.gui.internal.editors.EditorFactoryImpl" />

	<bean id="vizMapBypassNetworkListener"
		class="org.cytoscape.vizmap.gui.internal.bypass.VizMapBypassNetworkListener">
		<constructor-arg ref="editorFactory" />
		<constructor-arg ref="cyNetworkManagerServiceRef"></constructor-arg>
	</bean>

	<!-- Editors -->
	<bean id="continuousColor"
		class="org.cytoscape.vizmap.gui.internal.editors.ContinuousColor" />

	<bean id="continuousContinuous"
		class="org.cytoscape.vizmap.gui.internal.editors.ContinuousContinuous">
		<constructor-arg ref="cyOperatingContextServiceRef" />
	</bean>

	<bean id="continuousDiscrete"
		class="org.cytoscape.vizmap.gui.internal.editors.ContinuousDiscrete">
		<constructor-arg ref="editorFactory" />
	</bean>
	<bean id="discreteArrowShape"
		class="org.cytoscape.vizmap.gui.internal.editors.DiscreteArrowShape" />

	<bean id="discreteColor" class="org.cytoscape.vizmap.gui.internal.editors.DiscreteColor" />

	<bean id="discreteFont" class="org.cytoscape.vizmap.gui.internal.editors.DiscreteFont" />

	<bean id="discreteLabelPosition"
		class="org.cytoscape.vizmap.gui.internal.editors.DiscreteLabelPosition" />

	<bean id="discreteLineStyle"
		class="org.cytoscape.vizmap.gui.internal.editors.DiscreteLineStyle" />

	<bean id="discreteNodeShape"
		class="org.cytoscape.vizmap.gui.internal.editors.DiscreteNodeShape" />
	<bean id="discreteNumber"
		class="org.cytoscape.vizmap.gui.internal.editors.DiscreteNumber" />

	<bean id="discreteString"
		class="org.cytoscape.vizmap.gui.internal.editors.DiscreteString" />

	<!-- Main Panel Configurations -->
	<bean id="colorMgr" class="org.cytoscape.vizmap.gui.theme.ColorManager"
		scope="singleton">
	</bean>
	<bean id="iconManager" class="org.cytoscape.vizmap.gui.theme.IconManager"
		scope="singleton" />
	<bean id="menuManager" class="org.cytoscape.vizmap.gui.internal.VizMapperMenuManager"
		scope="singleton" depends-on="iconManager" autowire="autodetect">
		<property name="generateMenuLabel" value="${vizMapperMainPanel.menu.generateMenu}" />
		<property name="generateIconId" value="${vizMapperMainPanel.menu.generateMenu.icon}" />
	</bean>

	<bean name="defaultViewPanel"
		class="org.cytoscape.vizmap.gui.internal.DefaultViewPanelImpl" scope="singleton">
		<description>
			Create default view panel.	
		</description>
		<constructor-arg ref="cyNetworkFactoryServiceRef" />
		<constructor-arg ref="graphViewFactoryServiceRef" />
		<constructor-arg ref="vmmServiceRef" />
	</bean>

	<bean name="defViewEditor"
		class="org.cytoscape.vizmap.gui.internal.DefaultViewEditorImpl" scope="singleton"
		depends-on="defaultViewPanel">
		<constructor-arg ref="defaultViewPanel" />
		<constructor-arg ref="editorFactory" />
		<constructor-arg ref="vmmServiceRef" />
		<constructor-arg ref="cyNetworkManagerServiceRef" />
	</bean>


	<bean name="vizMapperUtil" class="org.cytoscape.vizmap.gui.internal.util.VizMapperUtil">
		<constructor-arg ref="vmmServiceRef" />
	</bean>


	<!--
		Actions for Vizmapper. These actions will be exported as Service.
	-->
	<bean name="createNewStyleAction"
		class="org.cytoscape.vizmap.gui.internal.action.CreateNewStyleAction"
		autowire="autodetect" depends-on="vizMapperMainPanel">
		<property name="menuLabel"
			value="${vizMapperMainPanel.menu.createNewStyleAction}" />
		<property name="iconId"
			value="${vizMapperMainPanel.menu.createNewStyleAction.icon}" />
	</bean>
	<bean name="removeStyleAction"
		class="org.cytoscape.vizmap.gui.internal.action.RemoveStyleAction"
		autowire="autodetect" depends-on="vizMapperMainPanel">
		<property name="menuLabel" value="${vizMapperMainPanel.menu.removeStyleAction}" />
		<property name="iconId"
			value="${vizMapperMainPanel.menu.removeStyleAction.icon}" />
	</bean>
	<bean name="renameStyleAction"
		class="org.cytoscape.vizmap.gui.internal.action.RenameStyleAction"
		autowire="autodetect" depends-on="vizMapperMainPanel">
		<property name="menuLabel" value="${vizMapperMainPanel.menu.renameStyleAction}" />
		<property name="iconId"
			value="${vizMapperMainPanel.menu.renameStyleAction.icon}" />
	</bean>

	<bean name="copyStyleAction"
		class="org.cytoscape.vizmap.gui.internal.action.CopyStyleAction"
		autowire="autodetect" depends-on="vizMapperMainPanel">
		<property name="menuLabel" value="${vizMapperMainPanel.menu.copyStyleAction}" />
		<property name="iconId"
			value="${vizMapperMainPanel.menu.copyStyleAction.icon}" />
	</bean>
	<bean name="createLegendAction"
		class="org.cytoscape.vizmap.gui.internal.action.CreateLegendAction"
		autowire="autodetect" depends-on="vizMapperMainPanel">
		<property name="menuLabel"
			value="${vizMapperMainPanel.menu.createLegendAction}" />
		<property name="iconId"
			value="${vizMapperMainPanel.menu.createLegendAction.icon}" />
	</bean>

	<!--
		Value generators: generate discrete mapping from simple algorithms.
	-->
	<bean name="rainbowGenerator"
		class="org.cytoscape.vizmap.gui.internal.util.RainbowColorMappingGenerator"
		scope="singleton" depends-on="generateValueAction" />
	<bean name="rainbowOscGenerator"
		class="org.cytoscape.vizmap.gui.internal.util.RainbowOscColorMappingGenerator"
		scope="singleton" depends-on="generateValueAction" />
	<bean name="randomColorGenerator"
		class="org.cytoscape.vizmap.gui.internal.util.RandomColorMappingGenerator"
		scope="singleton" depends-on="generateValueAction" />
	<bean name="generateValueAction"
		class="org.cytoscape.vizmap.gui.internal.action.GenerateValueAction"
		scope="singleton" depends-on="vizMapperMainPanel">
	</bean>

	<!--  For property sheet table -->
	<bean id="rendReg"
		class="com.l2fprod.common.propertysheet.PropertyRendererRegistry" />
	<bean id="editorReg" class="com.l2fprod.common.propertysheet.PropertyEditorRegistry" />
	<bean id="emptyBoxRenderer" class="javax.swing.table.DefaultTableCellRenderer" />
	<bean id="filledBoxRenderer" class="javax.swing.table.DefaultTableCellRenderer" />

	<bean id="propertySheetPanel" class="com.l2fprod.common.propertysheet.PropertySheetPanel" />

	<!-- Context Menu Commands -->
	<bean name="removeMappingAction"
		class="org.cytoscape.vizmap.gui.internal.action.RemoveMappingAction"
		depends-on="vizMapperMainPanel" autowire="autodetect">
		<property name="menuLabel"
			value="${vizMapperMainPanel.menu.removeMappingAction}" />
		<property name="iconId"
			value="${vizMapperMainPanel.menu.removeMappingAction.icon}" />
	</bean>

	<bean id="vizMapPropertySheetBuilder"
		class="org.cytoscape.vizmap.gui.internal.VizMapPropertySheetBuilder"
		depends-on="vizMapPropertyBuilder">
		<constructor-arg ref="vmmServiceRef" />
		<constructor-arg ref="propertySheetPanel" />
		<constructor-arg ref="rendReg" />
		<constructor-arg ref="editorReg" />
		<constructor-arg ref="emptyBoxRenderer" />
		<constructor-arg ref="filledBoxRenderer" />
		<constructor-arg ref="vizMapPropertyBuilder" />
		<constructor-arg ref="editorFactory" />
		<constructor-arg ref="colorMgr" />
		<constructor-arg ref="menuManager" />
	</bean>

	<bean id="vizMapPropertyBuilder" class="org.cytoscape.vizmap.gui.internal.VizMapPropertyBuilder">
		<constructor-arg ref="rendReg" />
		<constructor-arg ref="editorReg" />
		<constructor-arg ref="emptyBoxRenderer" />
		<constructor-arg ref="filledBoxRenderer" />
		<constructor-arg ref="editorFactory" />
		<constructor-arg ref="cyNetworkManagerServiceRef" />
	</bean>

	<bean id="vizMapEventHandlerManager"
		class="org.cytoscape.vizmap.gui.internal.event.VizMapEventHandlerManagerImpl">
		<constructor-arg ref="vizMapPropertySheetBuilder" />
	</bean>

	<bean id="editorWindowManager" class="org.cytoscape.vizmap.gui.internal.EditorWindowManager">
		<constructor-arg ref="editorFactory" />
		<constructor-arg ref="rendReg" />
		<constructor-arg ref="propertySheetPanel" />
	</bean>

	<bean name="vizMapperMainPanel" class="org.cytoscape.vizmap.gui.internal.VizMapperMainPanel"
		depends-on="colorMgr,
		iconManager, defViewEditor, vizMapperUtil, menuManager, propertySheetPanel, editorWindowManager">
		<constructor-arg ref="cytoscapeDesktopServiceRef" />
		<constructor-arg ref="defViewEditor" />
		<constructor-arg ref="iconManager" />
		<constructor-arg ref="colorMgr" />
		<constructor-arg ref="vmmServiceRef" />
		<constructor-arg ref="editorFactory" />
		<constructor-arg ref="menuManager" />
		<constructor-arg ref="propertySheetPanel" />
		<constructor-arg ref="vizMapPropertySheetBuilder" />
		<constructor-arg ref="vizMapEventHandlerManager" />
		<constructor-arg ref="editorWindowManager" />
		<constructor-arg ref="cyNetworkManagerServiceRef" />
		<constructor-arg ref="fileUtilServiceRef" />
		<constructor-arg ref="cyOperatingContextServiceRef" />
	</bean>
</beans>
