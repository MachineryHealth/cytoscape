<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:osgi="http://www.springframework.org/schema/osgi"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                      http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi-1.0.xsd"
	default-lazy-init="false">

	<!-- Import OSGi services -->

	<osgi:reference id="streamUtilServiceRef" interface="org.cytoscape.io.util.StreamUtil" />

	<osgi:reference id="taskManagerServiceRef" interface="org.cytoscape.work.TaskManager" />

	<osgi:reference id="presentationFactoryServiceRef" 
	      interface="org.cytoscape.view.presentation.PresentationFactory" />
<!--
	<osgi:reference id="presentationManagerServiceRef" 
	      interface="org.cytoscape.view.presentation.PresentationManager" />
-->
	<osgi:reference id="tunableInterceptorServiceRef"
		interface="org.cytoscape.work.TunableInterceptor" />

	<osgi:reference id="bookmarkServiceRef" interface="org.cytoscape.property.CyProperty"
		filter="(cyPropertyName=bookmarks)" />

	<osgi:reference id="bookmarksUtilServiceRef"
		interface="org.cytoscape.property.bookmark.BookmarksUtil" />

	<osgi:reference id="cyNetworkFactoryServiceRef"
		interface="org.cytoscape.model.CyNetworkFactory" />

	<osgi:reference id="cyNetworkViewFactoryServiceRef"
		interface="org.cytoscape.view.model.CyNetworkViewFactory" />

	<osgi:reference id="cyRootNetworkFactoryServiceRef"
		interface="org.cytoscape.model.subnetwork.CyRootNetworkFactory" />

	<osgi:reference id="cyLayoutsServiceRef" interface="org.cytoscape.layout.CyLayouts">
	</osgi:reference>

	<osgi:reference id="undoSupportServiceRef" interface="org.cytoscape.work.UndoSupport">
	</osgi:reference>

	<osgi:reference id="cyEventHelperServiceRef" interface="org.cytoscape.event.CyEventHelper">
	</osgi:reference>

	<osgi:reference id="creditScreenServiceRef" interface="org.cytoscape.splash.CreditScreen">
	</osgi:reference>
	
<!--	<osgi:reference id="fileUtil" interface="org.cytoscape.work.util.FileUtil">-->
<!--	</osgi:reference>-->
	

	<!-- define services that application provides -->

	<!-- Props are manages in this service -->
	<osgi:service id="cyOperatingContextService" ref="cyOperatingContext"
		interface="cytoscape.CyOperatingContext" />

	<osgi:service id="cyMenusService" ref="cytoscapeMenus"
		interface="cytoscape.view.CyMenus" />

	<osgi:service id="proxyHandlerService" ref="proxyHandler">
		<osgi:interfaces>
			<value>cytoscape.util.ProxyHandler</value>
			<value>cytoscape.events.PreferencesUpdatedListener
			</value>
		</osgi:interfaces>
	</osgi:service>

	<osgi:service id="cyNetworkNamingService" ref="networkNamingUtil"
		interface="cytoscape.util.CyNetworkNaming" />

	<osgi:service id="openBrowserService" ref="openBrowser"
		interface="cytoscape.util.OpenBrowser" />

		<!--
	<osgi:service id="printActionService" ref="printAction"
		interface="cytoscape.util.CyAction" />
		-->
	<osgi:service id="exitActionService" ref="exitAction"
		interface="cytoscape.util.CyAction" />
	<osgi:service id="undoActionService" ref="undoAction"
		interface="cytoscape.util.CyAction" />
	<osgi:service id="redoActionService" ref="redoAction"
		interface="cytoscape.util.CyAction" />
	<osgi:service id="deleteActionService" ref="deleteAction"
		interface="cytoscape.util.CyAction" />
	<osgi:service id="preferenceActionService" ref="preferenceAction"
		interface="cytoscape.util.CyAction" />
	<osgi:service id="bookmarkActionService" ref="bookmarkAction"
		interface="cytoscape.util.CyAction" />
	<osgi:service id="proxyServerActionService" ref="proxyServerAction"
		interface="cytoscape.util.CyAction" />
		<!--
	<osgi:service id="alphabeticalSelectionActionService" ref="alphabeticalSelectionAction"
		interface="cytoscape.util.CyAction" />
	<osgi:service id="bendSelectedEdgesActionService" ref="bendSelectedEdgesAction"
		interface="cytoscape.util.CyAction" />
	<osgi:service id="straightenSelectedEdgesActionService"
		ref="straightenSelectedEdgesAction" interface="cytoscape.util.CyAction" />
	<osgi:service id="showGraphicsDetailsActionService" ref="showGraphicsDetailsAction"
		interface="cytoscape.util.CyAction" />
		-->
	<osgi:service id="settingsActionService" ref="settingsAction"
		interface="cytoscape.util.CyAction" />

	<osgi:service id="cytoPanelWestActionService" ref="cytoPanelWestAction"
		interface="cytoscape.util.CyAction" />
	<osgi:service id="cytoPanelSouthActionService" ref="cytoPanelSouthAction"
		interface="cytoscape.util.CyAction" />

	<osgi:service id="cytoPanelEastActionService" ref="cytoPanelEastAction"
		interface="cytoscape.util.CyAction" />

	<osgi:set id="cyActionSet" interface="cytoscape.util.CyAction"
		cardinality="0..N">
		<osgi:listener bind-method="addAction" unbind-method="removeAction"
			ref="cytoscapeMenus" />
	</osgi:set>

	<osgi:set id="taskFactorySet" interface="org.cytoscape.work.TaskFactory"
		cardinality="0..N">
		<osgi:listener bind-method="addTaskFactory"
			unbind-method="removeTaskFactory" ref="cytoscapeMenus" />
	</osgi:set>

	<!-- export task factories -->

	<osgi:service id="helpContentsTaskFactoryService" ref="helpContentsTaskFactory"
		interface="org.cytoscape.work.TaskFactory"> 
        <osgi:service-properties>
            <entry key="preferredButtonGroup" value="z-help" />
            <entry key="preferredMenu" value="Help" />
            <entry key="tooltip" value="Show Help Contents..." />
            <entry key="title" value="Contents..." />
            <entry key="inToolBar" value="true" />
            <entry key="iconName" value="/images/ximian/stock_help.png"/>
			<!-- acceleratorCombo   KeyEvent.VK_F1, 0 -->
        </osgi:service-properties>
	</osgi:service>

	<osgi:service id="helpContactHelpDeskTaskFactoryService" ref="helpContactHelpDeskTaskFactory"
		interface="org.cytoscape.work.TaskFactory">
        <osgi:service-properties>
            <entry key="preferredMenu" value="Help" />
            <entry key="title" value="Contact Help Desk..." />
        </osgi:service-properties>
	</osgi:service>

	<osgi:service id="helpAboutTaskFactoryService" ref="helpAboutTaskFactory"
		interface="org.cytoscape.work.TaskFactory">
        <osgi:service-properties>
            <entry key="preferredMenu" value="Help" />
            <entry key="title" value="About..." />
        </osgi:service-properties>
	</osgi:service>

	<osgi:service id="arrangeGridTaskFactoryService" ref="arrangeGridTaskFactory"
		interface="org.cytoscape.work.TaskFactory">
        <osgi:service-properties>
            <entry key="preferredMenu" value="View.Arrange Network Windows" />
            <entry key="title" value="Grid" />
            <entry key="enableFor" value="networkAndView" />
        </osgi:service-properties>
	</osgi:service>
	<osgi:service id="arrangeCascadeTaskFactoryService" ref="arrangeCascadeTaskFactory"
		interface="org.cytoscape.work.TaskFactory">
        <osgi:service-properties>
            <entry key="preferredMenu" value="View.Arrange Network Windows" />
            <entry key="title" value="Cascade" />
            <entry key="enableFor" value="networkAndView" />
        </osgi:service-properties>
	</osgi:service>
	<osgi:service id="arrangeHorizontalTaskFactoryService" ref="arrangeHorizontalTaskFactory"
		interface="org.cytoscape.work.TaskFactory">
        <osgi:service-properties>
            <entry key="preferredMenu" value="View.Arrange Network Windows" />
            <entry key="title" value="Horizontal" />
            <entry key="enableFor" value="networkAndView" />
        </osgi:service-properties>
	</osgi:service>
	<osgi:service id="arrangeVerticalTaskFactoryService" ref="arrangeVerticalTaskFactory"
		interface="org.cytoscape.work.TaskFactory">
        <osgi:service-properties>
            <entry key="preferredMenu" value="View.Arrange Network Windows" />
            <entry key="title" value="Vertical" />
            <entry key="enableFor" value="networkAndView" />
        </osgi:service-properties>
	</osgi:service>

	<!--
		Finally, Export Cytoscape Desktop itself as a service. Other desktop
		components (like VizMapper GUI) can use it through DI
	-->
	<osgi:service id="cytoscapeDesktopService" ref="cytoscapeDesktop"
		interface="cytoscape.view.CySwingApplication" />

	<osgi:service id="cyNetworkManagerService" ref="networkManager"
		interface="cytoscape.CyNetworkManager" />

	<osgi:service id="networkPanelService" ref="networkPanel">
		<osgi:interfaces>
			<value>org.cytoscape.model.events.SelectedNodesListener
			</value>
			<value>org.cytoscape.model.events.SelectedEdgesListener
			</value>
			<value>org.cytoscape.model.events.UnselectedNodesListener
			</value>
			<value>org.cytoscape.model.events.UnselectedEdgesListener
			</value>
			<value>cytoscape.events.SetCurrentNetworkViewListener
			</value>
			<value>cytoscape.events.SetCurrentNetworkListener
			</value>
			<value>cytoscape.events.NetworkAddedListener
			</value>
			<value>cytoscape.events.NetworkViewAddedListener
			</value>
			<value>cytoscape.events.NetworkAboutToBeDestroyedListener
			</value>
			<value>cytoscape.events.NetworkViewAboutToBeDestroyedListener
			</value>
		</osgi:interfaces>
	</osgi:service>

	<osgi:service id="networkViewManagerService" ref="networkViewManager">
		<osgi:interfaces>
			<value>cytoscape.events.NetworkViewAddedListener
			</value>
			<value>cytoscape.events.NetworkViewAboutToBeDestroyedListener
			</value>
			<value>cytoscape.events.SetCurrentNetworkViewListener
			</value>
			<value>cytoscape.events.SetCurrentNetworkListener
			</value>
		</osgi:interfaces>
	</osgi:service>

	<osgi:service id="birdsEyeViewHandlerService" ref="birdsEyeViewHandler">
		<osgi:interfaces>
			<value>cytoscape.events.SetCurrentNetworkViewListener
			</value>
			<value>cytoscape.events.SetCurrentNetworkListener
			</value>
			<value>cytoscape.events.NetworkViewDestroyedListener
			</value>
		</osgi:interfaces>
	</osgi:service>

	<osgi:service id="undoMonitorSetCurrentNetworkViewListenerService"
		ref="undoMonitor" interface="cytoscape.events.SetCurrentNetworkViewListener" />

	<osgi:service id="aboutDialogFactoryService" ref="aboutDialogFactory"
		interface="cytoscape.dialogs.AboutDialogFactory" />

	<osgi:service id="fileUtilService" ref="fileUtil"
		interface="cytoscape.util.FileUtil" />

	<osgi:service id="networkManagerService" ref="networkManager"
		interface="cytoscape.CyNetworkManager" />



    <osgi:service id="createNetworkViewTaskFactoryService" ref="createNetworkViewTaskFactory">
        <osgi:interfaces>
            <value>org.cytoscape.work.TaskFactory</value>
            <value>cytoscape.xtask.CreateNetworkViewTaskFactory</value>
        </osgi:interfaces>
        <osgi:service-properties>
            <entry key="title" value="Create View" />
            <entry key="preferredMenu" value="Edit" />
        </osgi:service-properties>
    </osgi:service>

	<osgi:service id="selectRegisterListenerService" ref="selectRegisterListener"
		interface="cytoscape.events.NetworkViewAddedListener" />
</beans>
