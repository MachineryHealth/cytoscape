<?xml version="1.0"?>
<project name="CytoscapeEditor" default="jar" basedir=".">
	
	<!-- directory definitions -->
  	<property name="root.dir" value="."/>
  	<property name="src.dir" value="${root.dir}/src"/>
	<property name="doc.dir" value="${root.dir}/doc"/> 
	<property name="lib.dir" value="${root.dir}/lib"/>
 	<property name="build.dir" value="${root.dir}/build"/>

	<property name="cytoscape.dir" value="../../cytoscape"/>
	<property name="cytoscape.lib.dir" value = "${cytoscape.dir}/lib"/>

	<!-- plugin definitions -->
	<property name="plugin.name" value="CytoscapeEditor"/>
	<property name="plugin.jar" value = "${root.dir}/${plugin.name}.jar"/>

	<!-- compiler options -->
	<property name="build.compiler" value="modern"/>
	
	<!-- classpath with all lib, cytoscape, and cytoscape lib classes -->
	<path id="plugin.classpath">
		<fileset dir="${lib.dir}">
			<include name="*.jar"/>
		</fileset>
		<fileset dir="${cytoscape.lib.dir}">
			<include name="*.jar"/>
		</fileset>
		<fileset dir="${cytoscape.dir}">
			<include name="*.jar"/>
		</fileset>
	</path>

  	<!-- Target to create the build directories prior to compilation -->
  	<target name="prepare">
    		<mkdir dir="${build.dir}"/>
  	</target>

	<!--  Target to clean out all directories -->
  	<target name="clean" 
	        description="Removes all generated files.">
    		<delete dir="${build.dir}"/>
    		<delete dir="${doc.dir}"/>
    		<delete file="${plugin.jar}"/>
  	</target>
	
	<!--  Target to create the javadoc information -->
	<target name="doc" 
	        depends="prepare"> 
		<mkdir dir="${doc.dir}"/>
		<javadoc destdir="${doc.dir}" 
		         classpathref="plugin.classpath"
		         Private="yes"> 
			<fileset dir="${src.dir}" defaultexcludes="no"/> 
		</javadoc> 
	</target>

        
	<!--  Target to compile all Plug In Code -->
  	<target name="compile" 
	        depends="prepare" 
		description="Compiles all PlugIn source code.">
                <javac debug="Yes" 
		       srcdir="${src.dir}" 
		       destdir="${build.dir}"
		       deprecation="true"
		       classpathref="plugin.classpath"/>
	</target>
  	
	<!--  Create PlugIn Jar File -->
   	<target name="jar" 
	        depends="compile" 
	        description="Creates PlugIn Jar File.">
		<unjar dest="${build.dir}">
			<fileset dir="${lib.dir}"/>
       		</unjar>
		<copy todir="${build.dir}" file="plugin.props"/>
		<jar destfile="${plugin.jar}">
			<manifest>
				<attribute name="Cytoscape-Plugin" 
				           value="cytoscape.editor.CytoscapeEditorPlugin"/>
			</manifest>
			<fileset dir="${build.dir}"/>
		</jar>
	</target>

   	<target name="all" 
	        depends="jar,doc"/>
</project>
