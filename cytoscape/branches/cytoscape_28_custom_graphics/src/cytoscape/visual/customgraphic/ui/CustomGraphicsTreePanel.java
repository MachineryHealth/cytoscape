package cytoscape.visual.customgraphic.ui;

import java.util.ArrayList;
import java.util.Collection;
import java.util.List;

import org.jdesktop.swingx.treetable.DefaultMutableTreeTableNode;
import org.jdesktop.swingx.treetable.DefaultTreeTableModel;
import org.jdesktop.swingx.treetable.TreeTableModel;
import org.jdesktop.swingx.treetable.TreeTableNode;

import cytoscape.visual.customgraphic.CustomGraphicsPool;
import cytoscape.visual.customgraphic.CyCustomGraphics;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * CustomGraphicsTreePanel.java
 *
 * Created on 2010/03/12, 16:29:21
 */

/**
 *
 * @author kono
 */
public class CustomGraphicsTreePanel extends javax.swing.JPanel {
	
    /** Creates new form CustomGraphicsTreePanel */
    public CustomGraphicsTreePanel() {
        initComponents();
  
       
        
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

    		final DefaultMutableTreeTableNode root = new DefaultMutableTreeTableNode();
    		buildDefaultTree(root);
    		final List<String> columnNames = new ArrayList<String>();
    		columnNames.add("Name");
    		columnNames.add("Location");
    		columnNames.add("Preview");
    		final TreeTableModel model = new DefaultTreeTableModel(root, columnNames);
    		mainScrollPane = new javax.swing.JScrollPane();
        customGraphicsTreeTable = new org.jdesktop.swingx.JXTreeTable(model);
        customGraphicsTreeTable.setRootVisible(true);
        customGraphicsTreeTable.setRowHeight(100);
 
        customGraphicsTreeTable.setTreeCellRenderer(new CyCustomGraphicsTreeCellRenderer());
        //customGraphicsTreeTable.setDefaultRenderer(CyCustomGraphics.class, new CyCustomGraphicsTableCellRenderer());
 
        mainScrollPane.setViewportView(customGraphicsTreeTable);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(mainScrollPane, javax.swing.GroupLayout.DEFAULT_SIZE, 329, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(mainScrollPane, javax.swing.GroupLayout.DEFAULT_SIZE, 410, Short.MAX_VALUE)
        );
    }// </editor-fold>


    // Variables declaration - do not modify
    private org.jdesktop.swingx.JXTreeTable customGraphicsTreeTable;
    private javax.swing.JScrollPane mainScrollPane;
    // End of variables declaration
    
    private void buildDefaultTree(DefaultMutableTreeTableNode root) {
    		final DefaultMutableTreeTableNode staticImages = new DefaultMutableTreeTableNode("Static");
    		final DefaultMutableTreeTableNode dynamicImages = new DefaultMutableTreeTableNode("Dynamic");
    		root.add(staticImages);
    		root.add(dynamicImages);
    		
    		Collection<CyCustomGraphics<?>> graphics = CustomGraphicsPool.getAll();
    		
    		for(CyCustomGraphics g: graphics) {
    			List<Object> data = new ArrayList<Object>();
    			data.add(g.getDisplayName());
    			data.add("Test");
    			data.add(g);
    			DefaultMutableTreeTableNode imageNode = new CyCustomGraphicsTreeNode(data);
    			System.out.println("Col count = " + imageNode.getColumnCount());
    			staticImages.add(imageNode);
    		}
    }

}
