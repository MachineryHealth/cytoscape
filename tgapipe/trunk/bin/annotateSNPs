#! /usr/bin/env python

"""
Usage:
   bin/annotateSNPs SNPIDlist SNPIDcol getEvidenceFlatFile

   currently expects column 0 to be a unique identifier
"""

import sys, os
myBinDir = os.path.normpath(os.path.dirname(sys.argv[0]))
sys.path.append(myBinDir + "/../src")

from getEvidence.getEvidence import GETable

def main():

   geTbl = GETable(sys.argv[3])
   
   f = file(sys.argv[1])
   fdata = f.readlines()
   f.close()

   for line in fdata[1:]:
      row = line.strip().split("\t")
      snpcol = row[int(sys.argv[2])-1]
      if snpcol != "":
         snpIDs = snpcol.split(",")
         snpAnns = []
         for snpID in snpIDs:
            ann = geTbl.getVar(snpID)            
            if ann != None:
               ann.index = row[0]
               print ann

if __name__ == "__main__":
   main()
