<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
    
    <head>
        <title>Cytoscape Web example</title>
        
        <!-- Flash embedding utility (needed to embed Cytoscape Web) -->
        <script type="text/javascript" src="/js/cytoscape_web/AC_OETags.min.js"></script>
        
        <!-- JSON support for IE (needed to use JS API) -->
        <script type="text/javascript" src="/js/cytoscape_web/json2.min.js"></script>
        
        <!-- Cytoscape Web JS API (needed to reference org.cytoscapeweb.Visualization) -->
        <script type="text/javascript" src="/js/cytoscape_web/cytoscapeweb.min.js"></script>
        
        <script type="text/javascript">
            window.onload=function(){
                // id of Cytoscape Web container div
                var div_id = "cytoscapeweb";
                
                // NOTE the attributes on nodes and edges
                var network = '\
                <graphml>\
                  <key id="label" for="all" attr.name="label" attr.type="string"/>\
                  <key id="foo" for="node" attr.name="foo" attr.type="string"/>\
                  <key id="bar" for="edge" attr.name="bar" attr.type="string"/>\
                  <graph edgedefault="undirected">\
                    <node id="1">\
                        <data key="label">1</data>\
                        <data key="foo">Is this the real life?</data>\
                    </node>\
                    <node id="2">\
                        <data key="label">2</data>\
                        <data key="foo">Is this just fantasy?</data>\
                    </node>\
                    <edge target="1" source="2">\
                        <data key="label">2 to 1</data>\
                        <data key="bar">Caught in a landslide...</data>\
                    </edge>\
                  </graph>\
                </graphml>\
                ';
                
                // options used for Cytoscape Web
                var options = {
                    // where you have the Cytoscape Web SWF
                    swfPath: "/swf/CytoscapeWeb",
                    
                    // where you have the Flash installer SWF
                    flashInstallerPath: "/swf/playerProductInstall",
                    
                    // your data goes here
                    network: network,
                    
                    // show labels
                    labelsVisible: true,
                    
                    // hide pan zoom
                    panZoomControlVisible: false 
                };
                
                var vis = new org.cytoscapeweb.Visualization(div_id, options);
                
                // callback when Cytoscape Web has finished drawing
                vis.ready(function(){
                
                    // add a listener for when nodes and edges are clicked
                    vis.addListener("click", "nodes", function(event){
                        handle_click(event);
                    });
                    vis.addListener("click", "edges", function(event){
                        handle_click(event);
                    });
                    
                    function handle_click(event){
                         var target = event.target;
                         
                         clear();
                         print("event.group = " + event.group);
                         for(var i in target.data){
                            var variable_name = i;
                            var variable_value = target.data[i];
                            
                            print( "event.target.data." + variable_name + " = " + variable_value );
                         }
                    }
                    
                    function clear(){
                        document.getElementById("note").innerHTML = "";
                    }
                
                    function print(msg){
                        document.getElementById("note").innerHTML += "<p>" + msg + "</p>";
                    }
                });
                
                vis.draw(options);
                
                
            };
        </script>
        
        <style>
            * { margin: 0; padding: 0; font-family: Helvetica, Arial, Verdana, sans-serif; }
            html, body { height: 100%; width: 100%; padding: 0; margin: 0; }
            body { line-height: 1.5; color: #000000; font-size: 14px; }
            /* The Cytoscape Web container must have its dimensions set. */
            #cytoscapeweb { width: 100%; height: 50%; }
            #note { width: 100%; height: 50%; background-color: #f0f0f0; overflow: auto;  }
            p { padding: 0 0.5em; margin: 0; }
            p:first-child { padding-top: 0.5em; }
        </style>
    </head>
    
    <body>
        <div id="cytoscapeweb">
            Cytoscape Web will replace the contents of this div with your graph.
        </div>
        <div id="note">
            <p>Click nodes or edges.</p>
        </div>
    </body>
    
</html>